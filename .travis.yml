language: go
go:
- 1.9.2
env:
  global:
  - GIT_DEPLOY_DIR=public
  - GIT_DEPLOY_BRANCH=master
  - GIT_DEPLOY_USERNAME="apettinen"
  - GIT_DEPLOY_EMAIL=antti.pettinen@gmail.com
  - secure: cvy+HYPEtkQJr9YZLKb9cKuAqJsRXzIydQd+sWneRgHxOoJBic/8555WQJOLPBD1FvOlEwCHOi8ZReRUh7xpl0H7eqJXSVMYStD90Nh9dB7OeCdWwt1dnSk+3kv+P5B/eGSaGF6kbTDHNEcsZ1/XvCJ+G4lyxyDjPvL7Gyj4svlGs/R5PnP6Nu9eeAIAgUBnZt9sOXt3SyDvpczeR1+8gMVoKyoUA8dQjlbQGkSo8JMCXVr+yyZEt8nJ3VHCvZd6rDw3yguH+ETbO+ro35pB3FtzfEhh41grmEWYUd6hyc57nurOnFhvr8+sXyjpxvvmUTBeZv88G2/24tDaYJ1vXELnEHOVGbi57RSOkPMLIzQ5/zRk6nHem+OQ4sCA2keXv+ui0TLIEcqSM48nsa4i/6Nwls+GycyuzZN2GUwlHq241wirSAuMETLenHhI4yXLfGw+/qa7Udj/dJ53uz6DXZ4iNDb0CbhJi1DS4jW1FpuOVxhvAASegh+vkYNLixO2t+I79WnTgn3Dj4oBVkE1Koj2R0dyK4Oljjd+OdfkJoE7GjjtzrrBzfwY2hAKODTrvLoYTzhavhvPOgRcaksSYZZRSpB55Pgbml+c4JjT9gX8ReaLI9pxKQbzZbpzfh+LgpuI1/+Nvj2fQUMTaMZaoHe3+iiLbV8HuZrI4JL9H+U=
branches:
  only:
  - sources
install:
- rm -rf public || exit 0
before_script:
- git config --global push.default simple
- git submodule init
- git submodule update
- git clone --branch v2 https://github.com/go-yaml/yaml $GOPATH/src/gopkg.in/yaml.v2
- go get github.com/kardianos/govendor
- govendor get github.com/gohugoio/hugo
- go install github.com/gohugoio/hugo
script:
- hugo
after_success:
- cp .travis.yml public
- bash deploy.sh -v
